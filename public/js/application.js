!function(){angular.module("MyApp",["ngRoute","satellizer"]).config(["$routeProvider","$locationProvider","$authProvider","CONSTANTS",function(t,e,n,r){function o(t,e){e.isAuthenticated()&&t.path("/")}function a(t,e){e.isAuthenticated()||t.path("/login")}o.$inject=["$location","$auth"],a.$inject=["$location","$auth"],e.html5Mode(!0),t.when("/",{templateUrl:"partials/home.html"}).when("/contact",{templateUrl:"partials/contact.html",controller:"ContactCtrl"}).when("/login",{templateUrl:"partials/login.html",controller:"LoginCtrl",resolve:{skipIfAuthenticated:o}}).when("/signup",{templateUrl:"partials/signup.html",controller:"SignupCtrl",resolve:{skipIfAuthenticated:o}}).when("/account",{templateUrl:"partials/profile.html",controller:"ProfileCtrl",resolve:{loginRequired:a}}).when("/forgot",{templateUrl:"partials/forgot.html",controller:"ForgotCtrl",resolve:{skipIfAuthenticated:o}}).when("/reset/:token",{templateUrl:"partials/reset.html",controller:"ResetCtrl",resolve:{skipIfAuthenticated:o}}).otherwise({templateUrl:"partials/404.html"}),n.loginUrl="/login",n.signupUrl="/signup",n.facebook({url:"/auth/facebook",clientId:r.FB_CLIENT_ID,redirectUri:r.BASE_URL+"/auth/facebook/callback",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",scope:["email","public_profile","user_location","user_education_history"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}})}]).run(["$rootScope","$window",function(t,e){e.localStorage.user&&(t.currentUser=JSON.parse(e.localStorage.user))}])}(),function(){function t(t,e){function n(){e.send(t.contact).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}var r=this;r.sendContactForm=n}angular.module("MyApp").controller("ContactCtrl",t),t.$inject=["$scope","Contact"]}(),function(){function t(t,e){function n(){e.forgotPassword(t.user).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}var r=this;r.forgotPassword=n}angular.module("MyApp").controller("ForgotCtrl",t),t.$inject=["$scope","Account"]}(),function(){function t(t,e,n,r){function o(t){return t===e.path()}function a(){return r.isAuthenticated()}function c(){r.logout(),delete n.localStorage.user,e.path("/")}var s=this;s.isActive=o,s.isAuthenticated=a,s.logout=c}angular.module("MyApp").controller("HeaderCtrl",t),t.$inject=["$scope","$location","$window","$auth"]}(),function(){function t(t,e,n,r,o){function a(){o.login(t.user).then(function(t){e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),n.path("/account")})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}function c(a){o.authenticate(a).then(function(t){e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),n.path("/")})["catch"](function(e){e.error?t.messages={error:[{msg:e.error}]}:e.data&&(t.messages={error:[e.data]})})}var s=this;s.login=a,s.authenticate=c}angular.module("MyApp").controller("LoginCtrl",t),t.$inject=["$scope","$rootScope","$location","$window","$auth"]}(),function(){function t(t,e,n,r,o,a){function c(){a.updateProfile(t.profile).then(function(n){e.currentUser=n.data.user,r.localStorage.user=JSON.stringify(n.data.user),t.messages={success:[n.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}function s(){a.changePassword(t.profile).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}function i(e){o.link(e).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){r.scrollTo(0,0),t.messages={error:[e.data]}})}function u(e){o.unlink(e).then(function(){t.messages={success:[response.data]}})["catch"](function(e){t.messages={error:[e.data]}})}function l(){t.deleteAccount=function(){a.deleteAccount().then(function(){o.logout(),delete r.localStorage.user,n.path("/")})["catch"](function(e){t.messages={error:[e.data]}})}}var d=this;d.updateProfile=c,d.changePassword=s,d.link=i,d.unlink=u,d.deleteAccount=l,d.unlink=u,t.profile=e.currentUser}angular.module("MyApp").controller("ContactCtrl",t),t.$inject=["$scope","$rootScope","$location","$window","$auth","Account"]}(),function(){function t(t,e){function n(){e.resetPassword(t.user).then(function(e){t.messages={success:[e.data]}})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}var r=this;r.resetPassword=n}angular.module("MyApp").controller("ResetCtrl",t),t.$inject=["$scope","Account"]}(),function(){function t(t,e,n,r,o){function a(){o.signup(t.user).then(function(t){o.setToken(t),e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),n.path("/")})["catch"](function(e){t.messages={error:Array.isArray(e.data)?e.data:[e.data]}})}function c(a){o.authenticate(a).then(function(t){e.currentUser=t.data.user,r.localStorage.user=JSON.stringify(t.data.user),n.path("/")})["catch"](function(e){e.error?t.messages={error:[{msg:e.error}]}:e.data&&(t.messages={error:[e.data]})})}var s=this;s.signup=a,s.authenticate=c}angular.module("MyApp").controller("SignupCtrl",t),t.$inject=["$scope","$rootScope","$location","$window","$auth"]}(),function(){function t(t){return{updateProfile:function(e){return t.put("/account",e)},changePassword:function(e){return t.put("/account",e)},deleteAccount:function(){return t["delete"]("/account")},forgotPassword:function(e){return t.post("/forgot",e)},resetPassword:function(e){return t.post("/reset",e)}}}angular.module("MyApp").factory("Account",t),t.$inject=["$http"]}(),function(){function t(t){return{send:function(e){return t.post("/contact",e)}}}angular.module("MyApp").factory("Contact",t),t.$inject=["$http"]}();